<html>

<body onload="canvas.setup()">

	<canvas id="canvasArea1" style="position: absolute; left: 0; top: 0; z-index: 0; width:100%;height:100%"></canvas>
	<canvas id="canvasArea2" style="visibility: hidden; position: absolute; left: 0; top: 0; z-index: 0; width:100%;height:100%"></canvas>

	<script src="./canvas.js">

	</script>
</body>

</html>
<script>
	// Declare all global variables here
    x=0;
    y=0;
    score=0;

      circle_1 ={
      x_axis:499,
      y_axis:700,
      r:30,
      color:"red"
      };

    function setup() {
        // Initialize variables here
    }

    // Declare custom functions here
    function inc(key)
    {
      if(key.code== "ArrowUp")
        x+=5;
        if(key.code== "ArrowDown")
        x-=5;
    }

    function draw_circle(x_axis,y_axis,r,color){
      canvas.setColor(color);
      canvas.setDrawMode("fill")
      canvas.drawCircle(x_axis,y_axis,r);
      
      canvas.keyDownCallback=inc;
    }
    
     function change_colour(circle){
      if (circle.color=="red"){
         circle.color="blue";
        }
      else if (circle.color=="blue"){
          circle.color="orange";
        }
      else if(circle.color=="orange"){
          circle.color="green";
        }
      else{
        circle.color="red"
      }
     }

    function line_obstacle1(x,y,curr_color)
    {
      canvas.setDrawMode("stroke")

      canvas.setColor("red")
      if((100+y)%800+100>700)
      {
        canvas.drawLine((100+y)%800+100,100+x,900,100+x)
        canvas.drawLine(100,100+x,(300+y)%800+100,100+x)
      }
      else
      canvas.drawLine((100+y)%800+100,100+x,(100+y)%800+100+200,100+x)

      canvas.setColor("green")
      if((300+y)%800+100>700)
      {
        canvas.drawLine((300+y)%800+100,100+x,900,100+x)
        canvas.drawLine(100,100+x,(500+y)%800+100,100+x)
      }

      else
      canvas.drawLine((300+y)%800+100,100+x,(300+y)%800+100+200,100+x)

      canvas.setColor("blue")
      if((500+y)%800+100>700)
      {
        canvas.drawLine((500+y)%800+100,100+x,900,100+x)
        canvas.drawLine(100,100+x,(700+y)%800+100,100+x)
      }
      else
      canvas.drawLine((500+y)%800+100,100+x,(500+y)%800+100+200,100+x)

      canvas.setColor("orange")
      if((700+y)%800+100>700)
      {
        canvas.drawLine((700+y)%800+100,100+x,900,100+x)
        canvas.drawLine(100,100+x,(100+y)%800+100,100+x)
      }
      else
      canvas.drawLine((700+y)%800+100,100+x,(700+y)%800+100+200,100+x)

      if((100+y)%800+100<500 && (100+y)%800+100 >300)
        curr_colour = "red"
      else if((300+y)%800+100<500 && (300+y)%800+100 >300)
        curr_colour = "green"
      else if((500+y)%800+100<500 && (500+y)%800+100 >300)
        curr_colour = "blue"
      else if((700+y)%800+100<500 && (700+y)%800+100 >300)
        curr_colour = "orange"  
    }
    
    function check()
    {
      if (x%300-100==0)
      {
        // alert(circle_1.color);
        // alert(curr_colour);
        if(circle_1.color == curr_colour )
        {
          score++;
          x+=5;
        }
        else{
          score =0;
        }
      }
    }

    // Function while will be called repeatedly 
    function main() {
      canvas.clear();
      draw_circle(circle_1.x_axis,circle_1.y_axis,circle_1.r,circle_1.color);
      // if(x%200==0)
      // {
      //   change_colour(circle_1);
      //   x+=5;
      // }  
      // square(100,100)
      canvas.setDrawMode("stroke")
      canvas.setLineThickness(10)
      line_obstacle1(x%900-100,y);
      line_obstacle1((x+300)%900-100,y);
      line_obstacle1((x+600)%900-100,y);
      check();
      canvas.drawText(1000, 100, score, fontSize = 30)
      keyDownCallback=inc
      y+=0.5
}
    // Override functions here; 
    canvas.mainFunction = main;

    var timeStep = 0.005;
    canvas.startMain(timeStep);
    canvas.setupFunction = setup;


</script>